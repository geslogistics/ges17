<?xml version="1.0" encoding="utf-8"?>
<!-- Add new user group-->
<odoo>
    <record model="ir.module.category" id="module_tickets">
        <field name="name">Tickets Group</field>
        <field name="sequence">30</field>
    </record>

    <record id="group_ticket_user_own_docs" model="res.groups">
        <field name="name">Ticket User - Own Documents</field>
        <field name="category_id" ref="module_tickets" />
    </record>
    <record id="group_ticket_user_team_docs" model="res.groups">
        <field name="name">Ticket User - Team Documents</field>
        <field name="implied_ids" eval="[(4, ref('ges_logistics_ticket.group_ticket_user_own_docs'))]"/>
        <field name="category_id" ref="module_tickets" />
    </record>
    <record id="group_ticket_user_all_docs" model="res.groups">
        <field name="name">Ticket User - All Documents</field>
        <field name="implied_ids" eval="[(4, ref('ges_logistics_ticket.group_ticket_user_team_docs'))]"/>
        <field name="category_id" ref="module_tickets" />
    </record>

    <record id="group_ticket_admin" model="res.groups">
        <field name="name">Ticket Admin</field>
        <field name="implied_ids" eval="[(4, ref('ges_logistics_ticket.group_ticket_user_all_docs'))]"/>
        <field name="category_id" ref="module_tickets" />
    </record>
    
    <record id="rule_ticket_all_docs" model="ir.rule">
        <field name="name">ticket create/edit all docs</field>
        <field name="model_id" ref="model_ticket" />
        <field name="global" eval="False" />
        <field name="domain_force">[(1, '=', 1)]</field>
        <field name="groups" eval="[(4, ref('group_ticket_user_all_docs'))]" />
        <field eval="0" name="perm_unlink" />
        <field eval="1" name="perm_write" />
        <field eval="1" name="perm_read" />
        <field eval="1" name="perm_create" />
    </record>

    <record id="rule_ticket_team_docs" model="ir.rule">
        <field name="name">ticket create/edit team docs</field>
        <field name="model_id" ref="model_ticket" />
        <field name="global" eval="False" />
        <field name="domain_force">['|','&amp;',('reference_document.partner_id.team_id','!=',False),('reference_document.partner_id.team_id','=',user.sale_team_id.id),'&amp;',('reference_document.partner_id.procurement_ou_id','!=',False),('reference_document.partner_id.procurement_ou_id','=',user.default_operating_unit_procurement_id.id)]</field>
        <field name="groups" eval="[(4, ref('group_ticket_user_team_docs'))]" />
        <field eval="0" name="perm_unlink" />
        <field eval="1" name="perm_write" />
        <field eval="1" name="perm_read" />
        <field eval="1" name="perm_create" />
    </record>
   
    <record id="rule_ticket_own_docs" model="ir.rule">
        <field name="name">ticket create/edit own docs</field>
        <field name="model_id" ref="model_ticket" />
        <field name="global" eval="False" />
        <field name="domain_force">['|','&amp;',('reference_document.partner_id.user_id','!=',False),('reference_document.partner_id.user_id', '=', user.id),'&amp;',('reference_document.partner_id.buyer_id','!=',False),('reference_document.partner_id.buyer_id', '=', user.id)]</field>
        <field name="groups" eval="[(4, ref('group_ticket_user_own_docs'))]" />
        <field eval="0" name="perm_unlink" />
        <field eval="1" name="perm_write" />
        <field eval="1" name="perm_read" />
        <field eval="1" name="perm_create" />
    </record>




    
    <!-- Ticket Groups -->

   
    <!-- Submit Ticket group-->
    <record id="group_ticket_user_submit" model="res.groups">
        <field name="name">Allow Submit Ticket</field>
        <!--<field name="category_id" ref="module_tickets"/>-->
    </record>
    <!-- Validate Ticket group-->
    <record id="group_ticket_user_validate" model="res.groups">
        <field name="name">Allow Validate Ticket</field>
        <!--<field name="category_id" ref="module_tickets"/>-->
    </record>
    <!-- Approve Ticket group-->
    <record id="group_ticket_user_approve" model="res.groups">
        <field name="name">Allow Approve/Reject Ticket</field>
        <!--<field name="category_id" ref="module_tickets"/>-->
    </record>
    <!-- Return Draft Ticket group-->
    <record id="group_ticket_user_return_draft" model="res.groups">
        <field name="name">Allow Return Draft Ticket</field>
        <!--<field name="category_id" ref="module_tickets"/>-->
    </record>
    <!-- Activate Ticket group-->
    <record id="group_ticket_user_activate" model="res.groups">
        <field name="name">Allow Activate Ticket</field>
        <!--<field name="category_id" ref="module_tickets"/>-->
    </record>
    <!-- Cancel Ticket group-->
    <record id="group_ticket_user_cancel" model="res.groups">
        <field name="name">Allow Cancel Ticket</field>
        <!--<field name="category_id" ref="module_tickets"/>-->
    </record>
    <!-- Archive Ticket group-->
    <record id="group_ticket_user_archive" model="res.groups">
        <field name="name">Allow Archive/Unarchive Ticket</field>
        <!--<field name="category_id" ref="module_tickets"/>-->
    </record>






</odoo>

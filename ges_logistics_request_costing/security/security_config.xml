<?xml version="1.0" encoding="utf-8"?>
<!-- Add new user group-->
<odoo>
    
    <record id="rule_request_costing_all_docs" model="ir.rule">
        <field name="name">Costing Requests</field>
        <field name="model_id" ref="model_request_costing" />
        <field name="global" eval="False" />
        <field name="domain_force">[(1, '=', 1)]</field>
        <field name="groups" eval="[(4, ref('sales_team.group_sale_salesman_all_leads'))]" />
        <field eval="0" name="perm_unlink" />
        <field eval="1" name="perm_write" />
        <field eval="1" name="perm_read" />
        <field eval="1" name="perm_create" />
    </record>

    <record id="rule_request_costing_team_docs" model="ir.rule">
        <field name="name">Team Costing Requests</field>
        <field name="model_id" ref="model_request_costing" />
        <field name="global" eval="False" />
        <field name="domain_force">['|','&amp;',('partner_id.sales_ou_id','!=',False),('partner_id.sales_ou_id','=',user.default_operating_unit_sales_id.id),'&amp;',('partner_id.procurement_ou_id','!=',False),('partner_id.procurement_ou_id','=',user.default_operating_unit_procurement_id.id)]</field>
        <field name="groups" eval="[(4, ref('ges_logistics_application_partner.group_sale_salesman_team_docs')),(4, ref('purchase.group_purchase_user'))]" />
        <field eval="0" name="perm_unlink" />
        <field eval="1" name="perm_write" />
        <field eval="1" name="perm_read" />
        <field eval="1" name="perm_create" />
    </record>
   
    <record id="rule_request_costing_own_docs" model="ir.rule">
        <field name="name">Personal Costing Requests</field>
        <field name="model_id" ref="model_request_costing" />
        <field name="global" eval="False" />
        <field name="domain_force">['|','&amp;',('partner_id.user_id','!=',False),('partner_id.user_id', '=', user.id),'&amp;',('partner_id.buyer_id','!=',False),('partner_id.buyer_id', '=', user.id)]</field>
        <field name="groups" eval="[(4, ref('sales_team.group_sale_salesman')),(4, ref('purchase.group_purchase_user'))]" />
        <field eval="0" name="perm_unlink" />
        <field eval="1" name="perm_write" />
        <field eval="1" name="perm_read" />
        <field eval="1" name="perm_create" />
    </record>

    <!-- ticket rules -->
    

    <record id="rule_cost_req_ticket_team_docs" model="ir.rule">
        <field name="name">costing request ticket create/edit team docs</field>
        <field name="model_id" ref="model_ticket" />
        <field name="global" eval="False" />
        <field name="domain_force">['|','&amp;',('request_costing_id.partner_id.sales_ou_id','!=',False),('request_costing_id.partner_id.sales_ou_id','in',user.operating_unit_sales_ids.ids),'&amp;',('request_costing_id.partner_id.procurement_ou_id','!=',False),('request_costing_id.partner_id.procurement_ou_id','in',user.operating_unit_procurement_ids.ids)]</field>
        <field name="groups" eval="[(4, ref('ges_logistics_ticket.group_ticket_user_team_docs'))]" />
        <field eval="0" name="perm_unlink" />
        <field eval="1" name="perm_write" />
        <field eval="1" name="perm_read" />
        <field eval="1" name="perm_create" />
    </record>
   
    <record id="rule_cost_req_ticket_own_docs" model="ir.rule">
        <field name="name">costing request ticket create/edit own docs</field>
        <field name="model_id" ref="model_ticket" />
        <field name="global" eval="False" />
        <field name="domain_force">['|','|','|',('requester_user_id','=',user.id),('user_id','=',user.id),'&amp;',('request_costing_id.partner_id.sales_user_id','!=',False),('request_costing_id.partner_id.sales_user_id', '=', user.id),'&amp;',('request_costing_id.partner_id.procurement_user_id','!=',False),('request_costing_id.partner_id.procurement_user_id', '=', user.id)]</field>
        <field name="groups" eval="[(4, ref('ges_logistics_ticket.group_ticket_user_own_docs'))]" />
        <field eval="0" name="perm_unlink" />
        <field eval="1" name="perm_write" />
        <field eval="1" name="perm_read" />
        <field eval="1" name="perm_create" />
    </record>

    <record id="rule_cost_req_item_ticket_team_docs" model="ir.rule">
        <field name="name">costing request item ticket create/edit team docs</field>
        <field name="model_id" ref="model_ticket" />
        <field name="global" eval="False" />
        <field name="domain_force">['|','&amp;',('request_costing_item_id.partner_id.sales_ou_id','!=',False),('request_costing_item_id.partner_id.sales_ou_id','in',user.operating_unit_sales_ids.ids),'&amp;',('request_costing_item_id.partner_id.procurement_ou_id','!=',False),('request_costing_item_id.partner_id.procurement_ou_id','in',user.operating_unit_procurement_ids.ids)]</field>
        <field name="groups" eval="[(4, ref('ges_logistics_ticket.group_ticket_user_team_docs'))]" />
        <field eval="0" name="perm_unlink" />
        <field eval="1" name="perm_write" />
        <field eval="1" name="perm_read" />
        <field eval="1" name="perm_create" />
    </record>
   
    <record id="rule_cost_req_item_ticket_own_docs" model="ir.rule">
        <field name="name">costing request item ticket create/edit own docs</field>
        <field name="model_id" ref="model_ticket" />
        <field name="global" eval="False" />
        <field name="domain_force">['|','|','|',('requester_user_id','=',user.id),('user_id','=',user.id),'&amp;',('request_costing_item_id.partner_id.sales_user_id','!=',False),('request_costing_item_id.partner_id.sales_user_id', '=', user.id),'&amp;',('request_costing_item_id.partner_id.procurement_user_id','!=',False),('request_costing_item_id.partner_id.procurement_user_id', '=', user.id)]</field>
        <field name="groups" eval="[(4, ref('ges_logistics_ticket.group_ticket_user_own_docs'))]" />
        <field eval="0" name="perm_unlink" />
        <field eval="1" name="perm_write" />
        <field eval="1" name="perm_read" />
        <field eval="1" name="perm_create" />
    </record>




    
   



</odoo>

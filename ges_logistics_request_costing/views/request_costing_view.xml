<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        <!--Actions-->
        <record id="request_costing_act_window" model="ir.actions.act_window">
            <field name="name">Costing Requests</field>
            <field name="res_model">request.costing</field>
            <field name="view_mode">tree,form</field>
            <field name="context">{}</field>
            <field name="domain">[]</field>
        </record>


        <!--Views-->

        <record id="request_costing_list_view" model="ir.ui.view">
            <field name="name">request.costing.list.view</field>
            <field name="model">request.costing</field>
            <field name="arch" type="xml">
                <tree create="0">
                    <field name="name"/>
                    <field name="so_line_id"/>
                    <field name="user_id" widget="many2one_avatar_user"/>
                </tree>
            </field>
        </record>

        <record id="request_costing_form_view" model="ir.ui.view">
            <field name="name">request.costing.form.view</field>
            <field name="model">request.costing</field>
            <field name="arch" type="xml">

                <form duplicate="0">
                    <header>
                        <field name="state" widget="statusbar" statusbar_visible="draft,costing,selection,done" class="o_field_statusbar" options="{'clickable': '0', 'fold_field': 'fold'}" invisible="active == False"/>
                        
                        <button name="action_wizard_submit" data-hotkey="q" string="Submit" class="oe_highlight" type="object" invisible="state != 'draft'"/>
                        <button name="action_wizard_validate_sale" data-hotkey="q" string="Validate" class="oe_highlight btn-success" type="object" invisible="state != 'sale_validation'"/>
                        <button name="action_wizard_return_sale" data-hotkey="z" string="Return" class="oe_highlight btn-danger" type="object" invisible="state != 'sale_validation'"/>
                        <button name="action_wizard_submit_selection" data-hotkey="z" string="Submit" class="oe_highlight" type="object" invisible="state != 'selection'"/>
                        <button name="action_wizard_cancel" data-hotkey="z" string="Cancel" class="btn btn-secondary" type="object" invisible="state == 'cancel'"/>
                    </header>
                    <sheet>
                        <div class="oe_button_box" name="button_box">
                                       
                        </div>
                        <field name="active" invisible="1"/>
                        <field name="company_id" invisible="1"/>
                        <field name="currency_id" invisible="1"/>
                        
                        <field name="current_user_id" invisible="0"/>
                        <field name="current_sale_team_id" invisible="1"/>
                        <field name="current_purchase_team_id" invisible="1"/>
                        <field name="is_sale_user" invisible="1"/>
                        <field name="is_sale_team_user" invisible="1"/>
                        <field name="is_sale_team_leader" invisible="1"/>
                        <field name="is_sale_manager" invisible="1"/>
                        <field name="is_sale_any" invisible="1"/>
                        <field name="is_purchase_user" invisible="1"/>
                        <field name="is_purchase_team_leader" invisible="1"/>
                        <field name="is_purchase_manager" invisible="1"/>
                        <field name="is_purchase_any" invisible="1"/>
                        <field name="is_pa_user" invisible="1"/>
                        <field name="is_sale_ou_user" invisible="0"/>

                        <widget name="web_ribbon" title="Archived" bg_color="bg-danger" invisible="active == True"/>

                        
                        
            
                        <div class="oe_title mb12">
                            <h1>
                                <field class="text-break" name="name" default_focus="1" readonly="1"/>
                            </h1>
                        </div>
                        
                        <group>
                            <group string="Customer">
                                <field name="partner_id"/>
                                <field name="customer_class"/>
                                <field name="customer_segment"/>
                                <field name="sale_user_id" widget="many2one_avatar_user"  readonly="1" force_save="1"/>
                                <field name="sale_team_id"  readonly="1" force_save="1"/>
                                <field name="sale_ou_id"  />
                            </group>
                            <group string="Request Details">
                                <field name="create_date"/>
                                <field name="so_line_id" invisible="1"/>
                                <field name="so_id"/>
                                <field name="product_id"/>
                                <field name="reference_document"/>
                                <field name="reference_document_type"/>
                                
                            </group>
                            <group string="From">
                                <field name="user_id" widget="many2one_avatar_user" readonly="not (is_sale_manager)" required="1"/>
                                <field name="team_id"/>
                            </group>
                            <group string="To">
                                <!--<field name="assign_datetime"/>-->
                                <field name="main_buyer_id" widget="many2one_avatar_user" required="not assigned_user_ids"/>
                                <field name="main_purchase_team_id"/>
                                <field name="assigned_user_ids" widget="many2many_tags"/>
                                <field name="assigned_team_ids" widget="many2many_tags"/>
                            </group>
                        </group>
                        <group>
                            <group string="Request Details">
                                <field name="request_vendor_ids" widget="many2many_tags" options="{'no_quick_create': True, 'no_create': True,'no_create_edit':True}"/>
                                <field name="request_product_ids" widget="many2many_tags" options="{'no_quick_create': True, 'no_create': True,'no_create_edit':True}"/>
                                <field name="target_cost"/>
                                <field name="target_date"/>
                                <field name="request_notes"/>
                            </group>
                            <group string="Offer Details">
                                <field name="offer_vendor_ids" widget="many2many_tags"/>
                                <field name="offer_product_ids" widget="many2many_tags"/>
                                <field name="offer_notes"/>
                            </group>
                        </group>

                        <group string="Summary"/>

                        <div class="ges-kanban-banner-container" invisible="not request_item_ids">
                            <div class="ges-stat-secondary-box">
                                <div class="ges-stat-box-title">
                                    <span>Internal</span>
                                </div>
                                <div class="ges-stat-box-subtitle">
                                    <span>Provided in-house by internal resources</span>
                                </div>
                                <div class="ges-stat-box-figure">
                                    <field name='items_in_selected_total_applicable' nolabel="1"/>
                                </div>
                                <div class="ges-stat-box-bottom">
                                    <div class="ges-stat-white-badge">
                                        <field name='items_in_selected_total_applicable_of_total' widget="percentage" nolabel="1"/>
                                    </div>
                                    <div class="ges-stat-white-badge-desc">
                                        <span>Of Total</span>
                                    </div>
                                </div>
                            </div>
                            <div class="ges-stat-secondary-box">
                                <div class="ges-stat-box-title">
                                    <span>External</span>
                                </div>
                                <div class="ges-stat-box-subtitle">
                                    <span>Provided by 3rd-Party vendors</span>
                                </div>
                                <div class="ges-stat-box-figure">
                                    <field name='items_ex_selected_total_applicable' nolabel="1"/>
                                </div>
                                <div class="ges-stat-box-bottom">
                                    <div class="ges-stat-white-badge">
                                        <field name='items_ex_selected_total_applicable_of_total' widget="percentage" nolabel="1"/>
                                    </div>
                                    <div class="ges-stat-white-badge-desc">
                                        <span>Of Total</span>
                                    </div>
                                </div>
                            </div>
                            <div class="ges-stat-primary-box">
                                <div class="ges-stat-box-title">
                                    <span>Total Cost</span>
                                </div>
                                <div class="ges-stat-box-subtitle">
                                    <span>Applied and accounted for</span>
                                </div>
                                <div class="ges-stat-box-figure">
                                    <field name='items_selected_total_applicable' nolabel="1"/>
                                </div>
                                <div class="ges-stat-box-bottom">
                                    <div class="ges-stat-white-badge" invisible="target_cost == 0">                                        
                                        <i style="color: red" class="fa fa-fw fa-caret-up mr-1" invisible="items_selected_total_applicable_of_target &lt;= 0"/>
                                        <i style="color: red" class="fa fa-fw fa-bullseye mr-2" invisible="items_selected_total_applicable_of_target &lt;= 0"/>
                                        <i style="color: green" class="fa fa-fw fa-caret-down mr-1" invisible="items_selected_total_applicable_of_target &gt;= 0"/>
                                        <i style="color: green" class="fa fa-fw fa-bullseye mr-2" invisible="items_selected_total_applicable_of_target &gt;= 0"/>
                                        <field name='items_selected_total_applicable_of_target_abs' nolabel="1" widget="percentage"/>
                                        <field name='items_selected_total_applicable_of_target' nolabel="1" invisible="1"/>
                                    </div>
                                    <div class="ges-stat-white-badge-desc" invisible="target_cost == 0">
                                        <span invisible="items_selected_total_applicable_of_target &lt;= 0">Above Target</span>
                                        <span invisible="items_selected_total_applicable_of_target &gt;= 0">Below Target</span>
                                        <span invisible="items_selected_total_applicable_of_target != 0">On Target</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <group string="Statistics"/>
                        <group invisible="not request_item_ids">
                            <field name="stats_filter" widget="selection_badge" style="margin-bottom:0px !important"/>
                        </group>
                        <div class="ges-kanban-banner-container" invisible="not request_item_ids">
                            <div class="ges-stat-secondary-box">
                                <div class="d-flex flex-row flex-wrap justify-content-between">
                                    <div class="text-start">
                                        <div>
                                            <field name="stat_bar_rank1_amount" invisible="stats_filter != 'all'"/>
                                            <field name="stat_in_bar_rank1_amount" invisible="stats_filter != 'internal'"/>
                                            <field name="stat_ex_bar_rank1_amount" invisible="stats_filter != 'external'"/>
                                        </div>
                                        <div class="ges-stat-box-subtitle">
                                            <field name="stat_bar_rank1_field" invisible="stats_filter != 'all'"/>
                                            <field name="stat_in_bar_rank1_field" invisible="stats_filter != 'internal'"/>
                                            <field name="stat_ex_bar_rank1_field" invisible="stats_filter != 'external'"/>
                                        </div>
                                    </div>
                                    <div class="text-center">
                                        <div>
                                            <field name="stat_bar_rank2_amount" invisible="stats_filter != 'all'"/>
                                            <field name="stat_in_bar_rank2_amount" invisible="stats_filter != 'internal'"/>
                                            <field name="stat_ex_bar_rank2_amount" invisible="stats_filter != 'external'"/>
                                        </div>
                                        <div class="ges-stat-box-subtitle">
                                            <field name="stat_bar_rank2_field" invisible="stats_filter != 'all'"/>
                                            <field name="stat_in_bar_rank2_field" invisible="stats_filter != 'internal'"/>
                                            <field name="stat_ex_bar_rank2_field" invisible="stats_filter != 'external'"/>
                                        </div>
                                    </div>
                                    <div class="text-center">
                                        <div>
                                            <field name="stat_bar_rank3_amount" invisible="stats_filter != 'all'"/>
                                            <field name="stat_in_bar_rank3_amount" invisible="stats_filter != 'internal'"/>
                                            <field name="stat_ex_bar_rank3_amount" invisible="stats_filter != 'external'"/>
                                        </div>
                                        <div class="ges-stat-box-subtitle">
                                            <field name="stat_bar_rank3_field" invisible="stats_filter != 'all'"/>
                                            <field name="stat_in_bar_rank3_field" invisible="stats_filter != 'internal'"/>
                                            <field name="stat_ex_bar_rank3_field" invisible="stats_filter != 'external'"/>
                                        </div>
                                    </div>
                                    <div class="text-end">
                                        <div>
                                            <field name="stat_bar_rank4_amount" invisible="stats_filter != 'all'"/>
                                            <field name="stat_in_bar_rank4_amount" invisible="stats_filter != 'internal'"/>
                                            <field name="stat_ex_bar_rank4_amount" invisible="stats_filter != 'external'"/>
                                        </div>
                                        <div class="ges-stat-box-subtitle">
                                            <field name="stat_bar_rank4_field" invisible="stats_filter != 'all'"/>
                                            <field name="stat_in_bar_rank4_field" invisible="stats_filter != 'internal'"/>
                                            <field name="stat_ex_bar_rank4_field" invisible="stats_filter != 'external'"/>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="ges-kanban-banner-container" invisible="not request_item_ids">
                            <div class="ges-stat-counts-box" invisible="stats_filter not in ('all','internal')">
                                <div class="ges-stat-box-title d-flex flex-row">
                                    <div class="ges-stat-counts-box-labels"><span>Internal</span></div>
                                    <div class="ges-stat-counts-box-values"><span>Req</span></div>
                                    <div class="ges-stat-counts-box-values"><span>All</span></div>
                                </div>
                                
                                <div class="ges-stat-counts-box-item" invisible="items_count == 0 and items_r_count == 0">
                                    <div class="ges-stat-counts-box-labels">
                                        <span>Count</span>
                                    </div>
                                    <div class="ges-stat-counts-box-values">
                                        <field  name="items_inr_count"/>
                                    </div>
                                    <div class="ges-stat-counts-box-values">
                                        <field  name="items_in_count"/>
                                    </div>
                                </div>
                                <div class="ges-stat-counts-box-item" invisible="items_to_quote_count == 0 and items_r_to_quote_count == 0">
                                    <div class="ges-stat-counts-box-labels">
                                        <span>To Quote</span>
                                    </div>
                                    <div class="ges-stat-counts-box-values">
                                        <field  name="items_inr_to_quote_count"/>
                                    </div>
                                    <div class="ges-stat-counts-box-values">
                                        <field  name="items_in_to_quote_count"/>
                                    </div>
                                </div>
                                <div class="ges-stat-counts-box-item" invisible="items_quoted_count == 0 and items_r_quoted_count == 0">
                                    <div class="ges-stat-counts-box-labels">
                                        <span>Quoted</span>
                                    </div>
                                    <div class="ges-stat-counts-box-values">
                                        <field  name="items_inr_quoted_count"/>
                                    </div>
                                    <div class="ges-stat-counts-box-values">
                                        <field  name="items_in_quoted_count"/>
                                    </div>
                                </div>
                                <div class="ges-stat-counts-box-item" invisible="items_to_send_count == 0 and items_r_to_send_count == 0">
                                    <div class="ges-stat-counts-box-labels">
                                        <span>To Send</span>
                                    </div>
                                    <div class="ges-stat-counts-box-values">
                                        <field  name="items_inr_to_send_count"/>
                                    </div>
                                    <div class="ges-stat-counts-box-values">
                                        <field  name="items_in_to_send_count"/>
                                    </div>
                                </div>
                                <div class="ges-stat-counts-box-item" invisible="items_waiting_count == 0 and items_r_waiting_count == 0">
                                    <div class="ges-stat-counts-box-labels">
                                        <span>Waiting</span>
                                    </div>
                                    <div class="ges-stat-counts-box-values">
                                        <field  name="items_inr_waiting_count"/>
                                    </div>
                                    <div class="ges-stat-counts-box-values">
                                        <field  name="items_in_waiting_count"/>
                                    </div>
                                </div>
                                <div class="ges-stat-counts-box-item" invisible="items_late_count == 0 and items_r_late_count == 0">
                                    <div class="ges-stat-counts-box-labels">
                                        <span>Late</span>
                                    </div>
                                    <div class="ges-stat-counts-box-values">
                                        <field  name="items_inr_late_count"/>
                                    </div>
                                    <div class="ges-stat-counts-box-values">
                                        <field  name="items_in_late_count"/>
                                    </div>
                                </div>
                                <div class="ges-stat-counts-box-item" invisible="items_failed_count == 0 and items_r_failed_count == 0">
                                    <div class="ges-stat-counts-box-labels">
                                        <span>Failed</span>
                                    </div>
                                    <div class="ges-stat-counts-box-values">
                                        <field  name="items_inr_failed_count"/>
                                    </div>
                                    <div class="ges-stat-counts-box-values">
                                        <field  name="items_in_failed_count"/>
                                    </div>
                                </div>
                                <div class="ges-stat-counts-box-item" invisible="items_suggested_count == 0 and items_r_suggested_count == 0">
                                    <div class="ges-stat-counts-box-labels">
                                        <span>Suggested</span>
                                    </div>
                                    <div class="ges-stat-counts-box-values">
                                        <field  name="items_inr_suggested_count"/>
                                    </div>
                                    <div class="ges-stat-counts-box-values">
                                        <field  name="items_in_suggested_count"/>
                                    </div>
                                </div>
                                <div class="ges-stat-counts-box-item" invisible="items_required_count == 0 and items_r_required_count == 0">
                                    <div class="ges-stat-counts-box-labels">
                                        <span>Required</span>
                                    </div>
                                    <div class="ges-stat-counts-box-values">
                                        <field  name="items_inr_required_count"/>
                                    </div>
                                    <div class="ges-stat-counts-box-values">
                                        <field  name="items_in_required_count"/>
                                    </div>
                                </div>
                                <div class="ges-stat-counts-box-item" invisible="items_selected_count == 0 and items_r_selected_count == 0">
                                    <div class="ges-stat-counts-box-labels">
                                        <span>Selected</span>
                                    </div>
                                    <div class="ges-stat-counts-box-values">
                                        <field  name="items_inr_selected_count"/>
                                    </div>
                                    <div class="ges-stat-counts-box-values">
                                        <field  name="items_in_selected_count"/>
                                    </div>
                                </div>
                                <div class="ges-stat-counts-box-item" invisible="items_to_confirm_count == 0 and items_r_to_confirm_count == 0">
                                    <div class="ges-stat-counts-box-labels">
                                        <span>To Confirm</span>
                                    </div>
                                    <div class="ges-stat-counts-box-values">
                                        <field  name="items_inr_to_confirm_count"/>
                                    </div>
                                    <div class="ges-stat-counts-box-values">
                                        <field  name="items_in_to_confirm_count"/>
                                    </div>
                                </div>
                                <div class="ges-stat-counts-box-item" invisible="items_confirmed_count == 0 and items_r_confirmed_count == 0">
                                    <div class="ges-stat-counts-box-labels">
                                        <span>Confirmed</span>
                                    </div>
                                    <div class="ges-stat-counts-box-values">
                                        <field  name="items_inr_confirmed_count"/>
                                    </div>
                                    <div class="ges-stat-counts-box-values">
                                        <field  name="items_in_confirmed_count"/>
                                    </div>
                                </div>
                                <div class="ges-stat-counts-box-item" invisible="items_to_bill_count == 0 and items_r_to_bill_count == 0">
                                    <div class="ges-stat-counts-box-labels">
                                        <span>To Bill</span>
                                    </div>
                                    <div class="ges-stat-counts-box-values">
                                        <field  name="items_inr_to_bill_count"/>
                                    </div>
                                    <div class="ges-stat-counts-box-values">
                                        <field  name="items_in_to_bill_count"/>
                                    </div>
                                </div>
                                <div class="ges-stat-counts-box-item" invisible="items_billed_count == 0 and items_r_billed_count == 0">
                                    <div class="ges-stat-counts-box-labels">
                                        <span>Billed</span>
                                    </div>
                                    <div class="ges-stat-counts-box-values">
                                        <field  name="items_inr_billed_count"/>
                                    </div>
                                    <div class="ges-stat-counts-box-values">
                                        <field  name="items_in_billed_count"/>
                                    </div>
                                </div>
                            </div>
                            

                            <div class="ges-stat-counts-box" invisible="stats_filter not in ('all','external')">
                                <div class="ges-stat-box-title d-flex flex-row">
                                    <div class="ges-stat-counts-box-labels"><span>External</span></div>
                                    <div class="ges-stat-counts-box-values"><span>Req</span></div>
                                    <div class="ges-stat-counts-box-values"><span>All</span></div>
                                </div>
                                
                                <div class="ges-stat-counts-box-item" invisible="items_count == 0 and items_r_count == 0">
                                    <div class="ges-stat-counts-box-labels">
                                        <span>Count</span>
                                    </div>
                                    <div class="ges-stat-counts-box-values">
                                        <field  name="items_exr_count"/>
                                    </div>
                                    <div class="ges-stat-counts-box-values">
                                        <field  name="items_ex_count"/>
                                    </div>
                                </div>
                                <div class="ges-stat-counts-box-item" invisible="items_to_quote_count == 0 and items_r_to_quote_count == 0">
                                    <div class="ges-stat-counts-box-labels">
                                        <span>To Quote</span>
                                    </div>
                                    <div class="ges-stat-counts-box-values">
                                        <field  name="items_exr_to_quote_count"/>
                                    </div>
                                    <div class="ges-stat-counts-box-values">
                                        <field  name="items_ex_to_quote_count"/>
                                    </div>
                                </div>
                                <div class="ges-stat-counts-box-item" invisible="items_quoted_count == 0 and items_r_quoted_count == 0">
                                    <div class="ges-stat-counts-box-labels">
                                        <span>Quoted</span>
                                    </div>
                                    <div class="ges-stat-counts-box-values">
                                        <field  name="items_exr_quoted_count"/>
                                    </div>
                                    <div class="ges-stat-counts-box-values">
                                        <field  name="items_ex_quoted_count"/>
                                    </div>
                                </div>
                                <div class="ges-stat-counts-box-item" invisible="items_to_send_count == 0 and items_r_to_send_count == 0">
                                    <div class="ges-stat-counts-box-labels">
                                        <span>To Send</span>
                                    </div>
                                    <div class="ges-stat-counts-box-values">
                                        <field  name="items_exr_to_send_count"/>
                                    </div>
                                    <div class="ges-stat-counts-box-values">
                                        <field  name="items_ex_to_send_count"/>
                                    </div>
                                </div>
                                <div class="ges-stat-counts-box-item" invisible="items_waiting_count == 0 and items_r_waiting_count == 0">
                                    <div class="ges-stat-counts-box-labels">
                                        <span>Waiting</span>
                                    </div>
                                    <div class="ges-stat-counts-box-values">
                                        <field  name="items_exr_waiting_count"/>
                                    </div>
                                    <div class="ges-stat-counts-box-values">
                                        <field  name="items_ex_waiting_count"/>
                                    </div>
                                </div>
                                <div class="ges-stat-counts-box-item" invisible="items_late_count == 0 and items_r_late_count == 0">
                                    <div class="ges-stat-counts-box-labels">
                                        <span>Late</span>
                                    </div>
                                    <div class="ges-stat-counts-box-values">
                                        <field  name="items_exr_late_count"/>
                                    </div>
                                    <div class="ges-stat-counts-box-values">
                                        <field  name="items_ex_late_count"/>
                                    </div>
                                </div>
                                <div class="ges-stat-counts-box-item" invisible="items_failed_count == 0 and items_r_failed_count == 0">
                                    <div class="ges-stat-counts-box-labels">
                                        <span>Failed</span>
                                    </div>
                                    <div class="ges-stat-counts-box-values">
                                        <field  name="items_exr_failed_count"/>
                                    </div>
                                    <div class="ges-stat-counts-box-values">
                                        <field  name="items_ex_failed_count"/>
                                    </div>
                                </div>
                                <div class="ges-stat-counts-box-item" invisible="items_suggested_count == 0 and items_r_suggested_count == 0">
                                    <div class="ges-stat-counts-box-labels">
                                        <span>Suggested</span>
                                    </div>
                                    <div class="ges-stat-counts-box-values">
                                        <field  name="items_exr_suggested_count"/>
                                    </div>
                                    <div class="ges-stat-counts-box-values">
                                        <field  name="items_ex_suggested_count"/>
                                    </div>
                                </div>
                                <div class="ges-stat-counts-box-item" invisible="items_required_count == 0 and items_r_required_count == 0">
                                    <div class="ges-stat-counts-box-labels">
                                        <span>Required</span>
                                    </div>
                                    <div class="ges-stat-counts-box-values">
                                        <field  name="items_exr_required_count"/>
                                    </div>
                                    <div class="ges-stat-counts-box-values">
                                        <field  name="items_ex_required_count"/>
                                    </div>
                                </div>
                                <div class="ges-stat-counts-box-item" invisible="items_selected_count == 0 and items_r_selected_count == 0">
                                    <div class="ges-stat-counts-box-labels">
                                        <span>Selected</span>
                                    </div>
                                    <div class="ges-stat-counts-box-values">
                                        <field  name="items_exr_selected_count"/>
                                    </div>
                                    <div class="ges-stat-counts-box-values">
                                        <field  name="items_ex_selected_count"/>
                                    </div>
                                </div>
                                <div class="ges-stat-counts-box-item" invisible="items_to_confirm_count == 0 and items_r_to_confirm_count == 0">
                                    <div class="ges-stat-counts-box-labels">
                                        <span>To Confirm</span>
                                    </div>
                                    <div class="ges-stat-counts-box-values">
                                        <field  name="items_exr_to_confirm_count"/>
                                    </div>
                                    <div class="ges-stat-counts-box-values">
                                        <field  name="items_ex_to_confirm_count"/>
                                    </div>
                                </div>
                                <div class="ges-stat-counts-box-item" invisible="items_confirmed_count == 0 and items_r_confirmed_count == 0">
                                    <div class="ges-stat-counts-box-labels">
                                        <span>Confirmed</span>
                                    </div>
                                    <div class="ges-stat-counts-box-values">
                                        <field  name="items_exr_confirmed_count"/>
                                    </div>
                                    <div class="ges-stat-counts-box-values">
                                        <field  name="items_ex_confirmed_count"/>
                                    </div>
                                </div>
                                <div class="ges-stat-counts-box-item" invisible="items_to_bill_count == 0 and items_r_to_bill_count == 0">
                                    <div class="ges-stat-counts-box-labels">
                                        <span>To Bill</span>
                                    </div>
                                    <div class="ges-stat-counts-box-values">
                                        <field  name="items_exr_to_bill_count"/>
                                    </div>
                                    <div class="ges-stat-counts-box-values">
                                        <field  name="items_ex_to_bill_count"/>
                                    </div>
                                </div>
                                <div class="ges-stat-counts-box-item" invisible="items_billed_count == 0 and items_r_billed_count == 0">
                                    <div class="ges-stat-counts-box-labels">
                                        <span>Billed</span>
                                    </div>
                                    <div class="ges-stat-counts-box-values">
                                        <field  name="items_exr_billed_count"/>
                                    </div>
                                    <div class="ges-stat-counts-box-values">
                                        <field  name="items_ex_billed_count"/>
                                    </div>
                                </div>
                            </div>

                            <div class="ges-stat-counts-box" invisible="stats_filter not in ('all')">
                                <div class="ges-stat-box-title d-flex flex-row">
                                    <div class="ges-stat-counts-box-labels"><span>Total</span></div>
                                    <div class="ges-stat-counts-box-values"><span>Req</span></div>
                                    <div class="ges-stat-counts-box-values"><span>All</span></div>
                                </div>
                                
                                <div class="ges-stat-counts-box-item" invisible="items_count == 0 and items_r_count == 0">
                                    <div class="ges-stat-counts-box-labels">
                                        <span>Count</span>
                                    </div>
                                    <div class="ges-stat-counts-box-values">
                                        <field  name="items_r_count"/>
                                    </div>
                                    <div class="ges-stat-counts-box-values">
                                        <field  name="items_count"/>
                                    </div>
                                </div>
                                <div class="ges-stat-counts-box-item" invisible="items_to_quote_count == 0 and items_r_to_quote_count == 0">
                                    <div class="ges-stat-counts-box-labels">
                                        <span>To Quote</span>
                                    </div>
                                    <div class="ges-stat-counts-box-values">
                                        <field  name="items_r_to_quote_count"/>
                                    </div>
                                    <div class="ges-stat-counts-box-values">
                                        <field  name="items_to_quote_count"/>
                                    </div>
                                </div>
                                <div class="ges-stat-counts-box-item" invisible="items_quoted_count == 0 and items_r_quoted_count == 0">
                                    <div class="ges-stat-counts-box-labels">
                                        <span>Quoted</span>
                                    </div>
                                    <div class="ges-stat-counts-box-values">
                                        <field  name="items_r_quoted_count"/>
                                    </div>
                                    <div class="ges-stat-counts-box-values">
                                        <field  name="items_quoted_count"/>
                                    </div>
                                </div>
                                <div class="ges-stat-counts-box-item" invisible="items_to_send_count == 0 and items_r_to_send_count == 0">
                                    <div class="ges-stat-counts-box-labels">
                                        <span>To Send</span>
                                    </div>
                                    <div class="ges-stat-counts-box-values">
                                        <field  name="items_r_to_send_count"/>
                                    </div>
                                    <div class="ges-stat-counts-box-values">
                                        <field  name="items_to_send_count"/>
                                    </div>
                                </div>
                                <div class="ges-stat-counts-box-item" invisible="items_waiting_count == 0 and items_r_waiting_count == 0">
                                    <div class="ges-stat-counts-box-labels">
                                        <span>Waiting</span>
                                    </div>
                                    <div class="ges-stat-counts-box-values">
                                        <field  name="items_r_waiting_count"/>
                                    </div>
                                    <div class="ges-stat-counts-box-values">
                                        <field  name="items_waiting_count"/>
                                    </div>
                                </div>
                                <div class="ges-stat-counts-box-item" invisible="items_late_count == 0 and items_r_late_count == 0">
                                    <div class="ges-stat-counts-box-labels">
                                        <span>Late</span>
                                    </div>
                                    <div class="ges-stat-counts-box-values">
                                        <field  name="items_r_late_count"/>
                                    </div>
                                    <div class="ges-stat-counts-box-values">
                                        <field  name="items_late_count"/>
                                    </div>
                                </div>
                                <div class="ges-stat-counts-box-item" invisible="items_failed_count == 0 and items_r_failed_count == 0">
                                    <div class="ges-stat-counts-box-labels">
                                        <span>Failed</span>
                                    </div>
                                    <div class="ges-stat-counts-box-values">
                                        <field  name="items_r_failed_count"/>
                                    </div>
                                    <div class="ges-stat-counts-box-values">
                                        <field  name="items_failed_count"/>
                                    </div>
                                </div>
                                <div class="ges-stat-counts-box-item" invisible="items_suggested_count == 0 and items_r_suggested_count == 0">
                                    <div class="ges-stat-counts-box-labels">
                                        <span>Suggested</span>
                                    </div>
                                    <div class="ges-stat-counts-box-values">
                                        <field  name="items_r_suggested_count"/>
                                    </div>
                                    <div class="ges-stat-counts-box-values">
                                        <field  name="items_suggested_count"/>
                                    </div>
                                </div>
                                <div class="ges-stat-counts-box-item" invisible="items_required_count == 0 and items_r_required_count == 0">
                                    <div class="ges-stat-counts-box-labels">
                                        <span>Required</span>
                                    </div>
                                    <div class="ges-stat-counts-box-values">
                                        <field  name="items_r_required_count"/>
                                    </div>
                                    <div class="ges-stat-counts-box-values">
                                        <field  name="items_required_count"/>
                                    </div>
                                </div>
                                <div class="ges-stat-counts-box-item" invisible="items_selected_count == 0 and items_r_selected_count == 0">
                                    <div class="ges-stat-counts-box-labels">
                                        <span>Selected</span>
                                    </div>
                                    <div class="ges-stat-counts-box-values">
                                        <field  name="items_r_selected_count"/>
                                    </div>
                                    <div class="ges-stat-counts-box-values">
                                        <field  name="items_selected_count"/>
                                    </div>
                                </div>
                                <div class="ges-stat-counts-box-item" invisible="items_to_confirm_count == 0 and items_r_to_confirm_count == 0">
                                    <div class="ges-stat-counts-box-labels">
                                        <span>To Confirm</span>
                                    </div>
                                    <div class="ges-stat-counts-box-values">
                                        <field  name="items_r_to_confirm_count"/>
                                    </div>
                                    <div class="ges-stat-counts-box-values">
                                        <field  name="items_to_confirm_count"/>
                                    </div>
                                </div>
                                <div class="ges-stat-counts-box-item" invisible="items_confirmed_count == 0 and items_r_confirmed_count == 0">
                                    <div class="ges-stat-counts-box-labels">
                                        <span>Confirmed</span>
                                    </div>
                                    <div class="ges-stat-counts-box-values">
                                        <field  name="items_r_confirmed_count"/>
                                    </div>
                                    <div class="ges-stat-counts-box-values">
                                        <field  name="items_confirmed_count"/>
                                    </div>
                                </div>
                                <div class="ges-stat-counts-box-item" invisible="items_to_bill_count == 0 and items_r_to_bill_count == 0">
                                    <div class="ges-stat-counts-box-labels">
                                        <span>To Bill</span>
                                    </div>
                                    <div class="ges-stat-counts-box-values">
                                        <field  name="items_r_to_bill_count"/>
                                    </div>
                                    <div class="ges-stat-counts-box-values">
                                        <field  name="items_to_bill_count"/>
                                    </div>
                                </div>
                                <div class="ges-stat-counts-box-item" invisible="items_billed_count == 0 and items_r_billed_count == 0">
                                    <div class="ges-stat-counts-box-labels">
                                        <span>Billed</span>
                                    </div>
                                    <div class="ges-stat-counts-box-values">
                                        <field  name="items_r_billed_count"/>
                                    </div>
                                    <div class="ges-stat-counts-box-values">
                                        <field  name="items_billed_count"/>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="ges-kanban-banner-container" invisible="not request_item_ids">
                            

                            <div class="ges-stat-counts-box2" invisible="stats_filter not in ('all','internal')">
                                <div class="ges-stat-box2-title">
                                    <div class="ges-stat-counts-box-labels"><span>Internal</span></div>
                                </div>
                                <div class="d-flex flex-column">
                                    <div class="ges-stat-counts-box2-item" invisible="not items_product_in_requested">
                                        <div class="ges-stat-counts-box2-labels">Requested</div>
                                        <div class="ges-stat-counts-box2-values"><field name="items_product_in_requested" widget="many2many_tags"/></div>
                                    </div>
                                    <div class="ges-stat-counts-box2-item" invisible="not items_product_in_quoted">
                                        <div class="ges-stat-counts-box2-labels">Quoted</div>
                                        <div class="ges-stat-counts-box2-values"><field name="items_product_in_quoted" widget="many2many_tags"/></div>
                                    </div>
                                    <div class="ges-stat-counts-box2-item" invisible="not items_product_in_failed">
                                        <div class="ges-stat-counts-box2-labels">Failed</div>
                                        <div class="ges-stat-counts-box2-values"><field name="items_product_in_failed" widget="many2many_tags"/></div>
                                    </div>
                                    <div class="ges-stat-counts-box2-item" invisible="not items_product_in_suggested">
                                        <div class="ges-stat-counts-box2-labels">Suggested</div>
                                        <div class="ges-stat-counts-box2-values"><field name="items_product_in_suggested" widget="many2many_tags"/></div>
                                    </div>
                                    <div class="ges-stat-counts-box2-item" invisible="not items_product_in_required">
                                        <div class="ges-stat-counts-box2-labels">Required</div>
                                        <div class="ges-stat-counts-box2-values"><field name="items_product_in_required" widget="many2many_tags"/></div>
                                    </div>
                                    <div class="ges-stat-counts-box2-item" invisible="not items_product_in_selected">
                                        <div class="ges-stat-counts-box2-labels">Selected</div>
                                        <div class="ges-stat-counts-box2-values"><field name="items_product_in_selected" widget="many2many_tags"/></div>
                                    </div>
                                    <div class="ges-stat-counts-box2-item" invisible="not items_product_in_confirmed">
                                        <div class="ges-stat-counts-box2-labels">Confirmed</div>
                                        <div class="ges-stat-counts-box2-values"><field name="items_product_in_confirmed" widget="many2many_tags"/></div>
                                    </div>
                                    <div class="ges-stat-counts-box2-item" invisible="not items_product_in_billed">
                                        <div class="ges-stat-counts-box2-labels">Billed</div>
                                        <div class="ges-stat-counts-box2-values"><field name="items_product_in_billed" widget="many2many_tags"/></div>
                                    </div>                        
                                </div>                             
                            </div>

                            <div class="ges-stat-counts-box" invisible="stats_filter not in ('all','external')">
                                <div class="ges-stat-box-title d-flex flex-row">
                                    <div class="ges-stat-counts-box-labels"><span>External</span></div>
                                </div>
                                <div class="d-flex flex-column">
                                    <div class="ges-stat-counts-box2-item" invisible="not items_ex_requested_vendors">
                                        <div class="ges-stat-counts-box2-labels">Requested</div>
                                        <div class="ges-stat-counts-box2-values"><field name="items_ex_requested_vendors" widget="many2many_tags"/></div>
                                    </div>
                                    <div class="ges-stat-counts-box2-item" invisible="not items_ex_quoted_vendors">
                                        <div class="ges-stat-counts-box2-labels">Quoted</div>
                                        <div class="ges-stat-counts-box2-values"><field name="items_ex_quoted_vendors" widget="many2many_tags"/></div>
                                    </div>
                                    <div class="ges-stat-counts-box2-item" invisible="not items_ex_quoted_high_vendors">
                                        <div class="ges-stat-counts-box2-labels">Highest</div>
                                        <div class="ges-stat-counts-box2-values"><field name="items_ex_quoted_high_vendors" widget="many2many_tags"/></div>
                                    </div>
                                    <div class="ges-stat-counts-box2-item" invisible="not items_ex_quoted_low_vendors">
                                        <div class="ges-stat-counts-box2-labels">Lowest</div>
                                        <div class="ges-stat-counts-box2-values"><field name="items_ex_quoted_low_vendors" widget="many2many_tags"/></div>
                                    </div>
                                    <div class="ges-stat-counts-box2-item" invisible="not items_ex_failed_vendors">
                                        <div class="ges-stat-counts-box2-labels">Failed</div>
                                        <div class="ges-stat-counts-box2-values"><field name="items_ex_failed_vendors" widget="many2many_tags"/></div>
                                    </div>
                                    <div class="ges-stat-counts-box2-item" invisible="not items_ex_suggested_vendors">
                                        <div class="ges-stat-counts-box2-labels">Suggested</div>
                                        <div class="ges-stat-counts-box2-values"><field name="items_ex_suggested_vendors" widget="many2many_tags"/></div>
                                    </div>
                                    <div class="ges-stat-counts-box2-item" invisible="not items_ex_required_vendors">
                                        <div class="ges-stat-counts-box2-labels">Required</div>
                                        <div class="ges-stat-counts-box2-values"><field name="items_ex_required_vendors" widget="many2many_tags"/></div>
                                    </div>
                                    <div class="ges-stat-counts-box2-item" invisible="not items_ex_selected_vendors">
                                        <div class="ges-stat-counts-box2-labels">Selected</div>
                                        <div class="ges-stat-counts-box2-values"><field name="items_ex_selected_vendors" widget="many2many_tags"/></div>
                                    </div>
                                    <div class="ges-stat-counts-box2-item" invisible="not items_ex_confirmed_vendors">
                                        <div class="ges-stat-counts-box2-labels">Confirmed</div>
                                        <div class="ges-stat-counts-box2-values"><field name="items_ex_confirmed_vendors" widget="many2many_tags"/></div>
                                    </div>
                                    <div class="ges-stat-counts-box2-item" invisible="not items_ex_billed_vendors">
                                        <div class="ges-stat-counts-box2-labels">Billed</div>
                                        <div class="ges-stat-counts-box2-values"><field name="items_ex_billed_vendors" widget="many2many_tags"/></div>
                                    </div>
                                </div>
                            </div>


                        </div>

                        
                        
                        
                        <group string="Quotes &amp; Services"/>
                        <div style="width:100% !important">
                            <button name="action_request_request_costing_wizard" data-hotkey="e" string="Request Item(s)" class="oe_highlight m-1" type="object" groups="" invisible="state != 'draft'"/>
                            <button name="action_request_request_costing_wizard" data-hotkey="e" string="Add Item(s)" class="oe_highlight m-1" type="object" groups="" invisible="state != 'costing'"/>
                            <button name="action_generate_po_mass" data-hotkey="r" string="Generate PO(s)" class="oe_highlight m-1" type="object" groups="" invisible="state != 'costing'"/>

                            <div class="mb-4"/>
                            <field name="request_item_ids" mode="kanban">
                                
                            </field>
                        </div>
                        <group>
                            <field name="ticket_ids"/>
                        </group>
                    </sheet>
                    <div class="oe_chatter">
                        <field name="message_follower_ids" widget="mail_followers" groups="base.group_user"/>
                        <field name="activity_ids" widget="mail_activity"/>
                        <field name="message_ids" widget="mail_thread"/>
                    </div>
                </form>
            </field>
        </record>

        <record id="request_costing_item_act_window" model="ir.actions.act_window">
            <field name="name">Costing Items</field>
            <field name="res_model">request.costing.item</field>
            <field name="view_mode">tree,form,kanban</field>
            <field name="context">{}</field>
            <field name="domain">[]</field>
        </record>


        
        
        <record id="request_costing_item_quick_create_form_view" model="ir.ui.view">
            <field name="name">request.costing.item.quick.create.form.view</field>
            <field name="model">request.costing.item</field>
            <field name="arch" type="xml">
                <form>
                    <field name="current_user_id" invisible="1"/>
                    <field name="current_sale_team_id" invisible="1"/>
                    <field name="current_purchase_team_id" invisible="1"/>
                    <field name="is_sale_user" invisible="1"/>
                    <field name="is_sale_team_user" invisible="1"/>
                    <field name="is_sale_team_leader" invisible="1"/>
                    <field name="is_sale_manager" invisible="1"/>
                    <field name="is_sale_any" invisible="1"/>
                    <field name="is_purchase_user" invisible="1"/>
                    <field name="is_purchase_team_leader" invisible="1"/>
                    <field name="is_purchase_manager" invisible="1"/>
                    <field name="is_purchase_any" invisible="1"/>
                    <field name="is_pa_user" invisible="1"/>

                    <field name="can_create" invisible="1"/>
                    <field name="can_edit" invisible="1"/>
                    <field name="can_delete" invisible="1"/>

                    <field name="can_generate_po" invisible="1"/>

                    <field name="can_quoted" invisible="1"/>
                    <field name="can_failed" invisible="1"/>
                    <field name="can_suggested" invisible="1"/>
                    <field name="can_required" invisible="1"/>
                    <field name="can_selected" invisible="1"/>
                    <field name="can_confirmed" invisible="1"/>
                    <field name="can_billed" invisible="1"/>
                    
                    <field name="can_remove_quoted" invisible="1"/>
                    <field name="can_remove_failed" invisible="1"/>
                    <field name="can_remove_suggested" invisible="1"/>
                    <field name="can_remove_required" invisible="1"/>
                    <field name="can_remove_selected" invisible="1"/>
                    <field name="can_remove_confirmed" invisible="1"/>
                    <field name="can_remove_billed" invisible="1"/>

                    
                    

                    <sheet style="padding-right: 30px !important; padding-left: 30px !important; ">
                        <group string="Type">
                            <group>
                                <field name="request_id" invisible="1"/>
                                <field name="company_id" invisible="1"/>   
                                <field name="sol_currency_id" invisible="1"/>                             
                                <field name="type" nolabel="1" widget="radio" options="{'horizontal': true}"/>
                            </group>
                        </group>
                        <group>
                            <field name="requested"/>     
                            <field name="to_send"/>
                            <field name="waiting"/>
                            <field name="late"/>      
                            <field name="state"/>    
                            
                        </group>
                        
                        <group string="Details" name="external_group" invisible="type != 'external'">
                            <group>
                                <field name="vendor_id"/>
                                <field name="user_id" invisible="0"/>
                                <field name="team_id" invisible="0"/>
                                <field name="assigned_user_id" invisible="0"/>
                                <field name="assigned_team_id" invisible="0"/>
                            </group>
                            <group>
                                <field name="po_id"/>
                                <field name="po_vendor_id"/>
                                <field name="po_currency_id" invisible="1" />
                                <field name="po_state"/>
                                <field name="po_amount_untaxed" />
                                <field name="po_amount_tax"  />
                                <field name="po_amount_total" />
                                <field name="applicable_po_total" invisible="applicable_po_total == po_amount_total"/>
                                <field name="applicable_so_total" invisible="applicable_so_total == applicable_po_total"/>
                                <field name="applicable_co_total" invisible="applicable_co_total == applicable_so_total"/>

                            </group>
                        </group>
                        <group string="Details" name="internal_group" invisible="type != 'internal'">
                            <group>
                                <field name="product_id" context="{'display_default_code': False}"/>
                                <field name="user_id" invisible="0"/>
                                <field name="team_id" invisible="0"/>
                                <field name="assigned_user_id" invisible="0"/>
                                <field name="assigned_team_id" invisible="0"/>
                            </group>
                            <group>
                                <field name="product_currency_id" invisible="1"/>
                                <field name="product_uom_category_id" invisible="1"/>
                                <field name="product_uom" force_save="1" groups="uom.group_uom" class="oe_no_button"/>
                                <field name="quantity"/>
                                <field name="price_unit" widget="monetary" />

                                <field name="total" widget="monetary" />
                            </group>
                        </group>
                        <group string="Note">
                            <group colspan="2">
                                 <field nolabel="1" colspan="2" name="note"/>
                            </group>
                        </group>
                        <group>
                            <field name="ticket_ids"/>
                            
                        </group>
                    </sheet>
                </form>
            </field>
        </record>

        <record id="request_costing_item_kanban_view" model="ir.ui.view">
            <field name="name">request.costing.item.kanban.view</field>
            <field name="model">request.costing.item</field>
            <field name="arch" type="xml">

                <kanban default_group_by="type" create="false" records_draggable="true" archivable="false" group_create="false" group_edit="false" group_delete="false" class="ges_kanban_costing" >
                    <field name="sequence" widget="handle" invisible="1" />

                    <field name="current_user_id" invisible="1"/>
                    <field name="current_sale_team_id" invisible="1"/>
                    <field name="current_purchase_team_id" invisible="1"/>
                    <field name="is_sale_user" invisible="1"/>
                    <field name="is_sale_team_user" invisible="1"/>
                    <field name="is_sale_team_leader" invisible="1"/>
                    <field name="is_sale_manager" invisible="1"/>
                    <field name="is_sale_any" invisible="1"/>
                    <field name="is_purchase_user" invisible="1"/>
                    <field name="is_purchase_team_leader" invisible="1"/>
                    <field name="is_purchase_manager" invisible="1"/>
                    <field name="is_purchase_any" invisible="1"/>
                    <field name="is_pa_user" invisible="1"/>

                    <field name="can_create" invisible="1"/>
                    <field name="can_edit" invisible="1"/>
                    <field name="can_delete" invisible="1"/>
                    <field name="can_cancel" invisible="1"/>

                    <field name="can_generate_po" invisible="1"/>

                    <field name="can_quoted" invisible="1"/>
                    <field name="can_failed" invisible="1"/>
                    <field name="can_suggested" invisible="1"/>
                    <field name="can_required" invisible="1"/>
                    <field name="can_selected" invisible="1"/>
                    <field name="can_confirmed" invisible="1"/>
                    <field name="can_billed" invisible="1"/>

                    <field name="can_submitted" invisible="1"/>
                    <field name="can_validated" invisible="1"/>
                    <field name="can_failed" invisible="1"/>
                    <field name="can_validate_failed" invisible="1"/>
                    
                    <field name="can_remove_quoted" invisible="1"/>
                    <field name="can_remove_failed" invisible="1"/>
                    <field name="can_remove_suggested" invisible="1"/>
                    <field name="can_remove_required" invisible="1"/>
                    <field name="can_remove_selected" invisible="1"/>
                    <field name="can_remove_confirmed" invisible="1"/>
                    <field name="can_remove_billed" invisible="1"/>
                    <field name="can_remove_billed" invisible="1"/>

                    <field name="user_id" invisible="1"/>
                    <field name="team_id" invisible="1"/>

                    <field name="company_id"/>
                    <field name="sol_currency_id"/>
                    <field name="type"/>
                    
                    <field name="requested"/>     
                    <field name="to_send"/>
                    <field name="waiting"/>
                    <field name="late"/>      
                    <field name="state"/>

                    

                    <field name="vendor_id"/>
                    <field name="po_id"/>
                    <field name="po_vendor_id"/>
                    <field name="po_currency_id"/>
                    <field name="po_state"/>
                    <field name="po_date_order"/>
                    <field name="po_amount_untaxed"/>
                    <field name="po_amount_tax"/>
                    <field name="po_amount_total"/>
                    <field name="applicable_po_total"/>
                    <field name="applicable_so_total"/>
                    <field name="applicable_co_total"/>
                    

                    <field name="product_id" context="{'display_default_code': False}"/>
                    <field name="product_currency_id"/>
                    <field name="internal_vendor"/>
                    <field name="quantity"/>
                    <field name="product_uom_category_id" />
                    <field name="product_uom"/>

                    <field name="price_unit"/>
                    <field name="total"/>
                    
                    <field name="note"/>

                    

                    <!--
                    <control>
                    <create name="add_item" string="Add an item"/>
                    </control>
                    -->
                    <templates>
                        <t t-name="kanban-menu">                        
                            <a t-if="record.po_id.value" type="object" class="dropdown-item" name="open_po">View RFQ/PO</a>
                            <a t-if="record.can_generate_po.raw_value" type="object" class="dropdown-item" name="generate_po">Generate RFQ</a>
                            <div t-if="record.po_id.value or record.can_generate_po.raw_value" role="separator" class="dropdown-divider"/>
                            <a t-if="record.can_submitted.raw_value" type="object" class="dropdown-item" name="submit_quote">Submit Quote</a>
                            <a t-if="record.can_validated.raw_value" type="object" class="dropdown-item" name="validate_quote">Validate Quote</a>
                            <a t-if="record.can_validated.raw_value" type="object" class="dropdown-item" name="return_quote">Return Quote</a>
                            <a t-if="record.can_failed.raw_value" type="object" class="dropdown-item" name="submit_failed">Quote Failed</a>
                            <a t-if="record.can_validate_failed.raw_value" type="object" class="dropdown-item" name="validate_failed">Validate Failed</a>
                            <a t-if="record.can_validate_failed.raw_value" type="object" class="dropdown-item" name="return_failed">Return Failed</a>
                            <!--<a t-if="record.can_quoted.raw_value" type="object" class="dropdown-item" name="mark_quoted">Mark as Quoted</a>-->
                            <!--<a t-if="record.can_remove_quoted.raw_value" type="object" class="dropdown-item" name="remove_mark_quoted">Remove Quoted</a>-->
                            <!--<a t-if="record.can_failed.raw_value" type="object" class="dropdown-item" name="mark_failed">Mark as Failed</a>-->
                            <!--<a t-if="record.can_remove_failed.raw_value" type="object" class="dropdown-item" name="remove_mark_failed">Remove Failed</a>-->
                            <a t-if="record.can_required.raw_value" type="object" class="dropdown-item" name="mark_required">Mark as Required</a>
                            <a t-if="record.can_remove_required.raw_value" type="object" class="dropdown-item" name="remove_mark_required">Remove Required</a>
                            
                            <a t-if="record.can_selected.raw_value" type="object" class="dropdown-item" name="mark_selected">Select</a>
                            <a t-if="record.can_remove_selected.raw_value" type="object" class="dropdown-item" name="remove_mark_selected">Unselect</a>
                            <a t-if="record.can_confirmed.raw_value" type="object" class="dropdown-item" name="mark_confirmed">Confirm</a>
                            <a t-if="record.can_remove_confirmed.raw_value" type="object" class="dropdown-item" name="remove_mark_confirmed">Unconfirm</a>
                            <a t-if="record.can_billed.raw_value" type="object" class="dropdown-item" name="mark_billed">Mark as Billed</a>
                            <a t-if="record.can_remove_billed.raw_value" type="object" class="dropdown-item" name="remove_mark_billed">Remove Billed</a>
                            <div t-if="record.can_delete.raw_value or record.can_cancel.raw_value" role="separator" class="dropdown-divider"/>
                            <a t-if="record.can_cancel.raw_value" type="object" class="dropdown-item" name="action_wizard_cancel_item">Cancel</a>
                            <a t-if="record.can_delete.raw_value" type="object" class="dropdown-item" name="action_delete_item" confirm="Are you sure you want delete this item?">
                                <i class="fa fa-fw fa-trash-o"/>
                                <span>Delete</span>
                            </a>
                        </t>
                        <t t-name="kanban-box">
                            <div t-attf-class="px-2 oe_kanban_global_click" style="; background-color: #f8f9fa !important">                            
                                <div class="ribbon ribbon-top-right" invisible="state != 'selected'">
                                    <span class="text-bg-success">Selected</span>
                                </div>
                                <div class="ribbon ribbon-top-right" invisible="state != 'required'">
                                    <span class="text-bg-warning">Required</span>
                                </div>
                                <div class="ribbon ribbon-top-right" invisible="state != 'failed'">
                                    <span class="text-bg-danger">Failed</span>
                                </div>
                                <div class="ribbon ribbon-top-right" invisible="state != 'confirmed'">
                                    <span class="text-bg-primary">Confirmed</span>
                                </div>
                                <div class="ribbon ribbon-top-right" invisible="state != 'rejected_selection'">
                                    <span class="text-bg-danger">Rejected</span>
                                </div>
                                <div class="ribbon ribbon-top-right" invisible="state != 'billed'">
                                    <span class="text-bg-primary" style="background-color: black !important;">Billed</span>
                                </div>
                                <div class="ribbon ribbon-top-right" invisible="state != 'rejected_billing'">
                                    <span class="text-bg-danger">Rejected</span>
                                </div>
                                <div class="ribbon ribbon-top-right" invisible="state != 'cancel'">
                                    <span class="text-bg-primary" style="background-color: #999999 !important;">Cancelled</span>
                                </div>
                                <div class="oe_kanban_details d-flex flex-column justify-content-between">
                                    <div class="d-flex flex-row" style="min-height:85px">      
                                        <div class="d-none d-sm-block ges-kanban-image-container">
                                            <div class="ges-kanban-image-box">
                                                <img class="ges-kanban-image-img" t-if="record.type.raw_value == 'external'" alt="Avatar" t-att-src="kanban_image('res.partner', 'avatar_128',record.po_vendor_id.raw_value)" onchange="0"/>
                                                <img class="ges-kanban-image-img" t-if="record.type.raw_value == 'internal'" alt="Avatar" t-att-src="kanban_image('res.partner', 'avatar_128',record.internal_vendor.raw_value)" onchange="0" />
                                            </div>
                                        </div>                                        
                                        <div style="width: 100%">
                                            <t t-if="record.type.raw_value == 'external'">
                                                <div class="mb-1" style="padding-right:20px">
                                                    <strong t-esc="record.vendor_id.value"/>
                                                </div>
                                                <div class="mb-1" t-if="record.po_id.value" >
                                                    <span><t t-out="record.po_state.value"/> [<span t-out="record.po_id.value"/> <t t-esc="record.po_date_order.value and record.po_date_order.value.split(' ')[0] or False"/>]</span>
                                                    <button name="open_po" title="Open PO" type="object" t-if="record.po_id.value" class="btn badge text-bg-primary mx-1 px-0">
                                                        <i class="fa fa-fw fa-search" role="img" aria-label="Purchases" title="Purchases"/>
                                                    </button>
                                                </div>
                                            </t>
                                            <t t-if="record.type.raw_value == 'internal'">
                                                <div class="mb-1" style="padding-right:20px">
                                                    <strong t-esc="record.product_id.value" />
                                                </div>
                                            </t>
                                            <div class="d-flex gap-1">
                                                <span class="badge rounded-pill text-bg-light align-self-center mx-0" t-esc="record.state.value"></span>
                                                <span class="badge rounded-pill text-bg-light align-self-center mx-0" t-if="record.requested.raw_value">Requested</span>
                                                <span class="badge rounded-pill text-bg-warning align-self-center mx-0" t-if="record.state.raw_value == 'to_quote'">To Quote</span>
                                                <span class="badge rounded-pill text-bg-warning align-self-center mx-0" t-if="record.state.raw_value == 'to_validate'">To Validate</span>
                                                <span class="badge rounded-pill text-bg-warning align-self-center mx-0" t-if="record.to_send.raw_value">To Send</span>
                                                <span class="badge rounded-pill text-bg-warning align-self-center mx-0" t-if="record.waiting.raw_value">Waiting</span>
                                                <span class="badge rounded-pill text-bg-danger align-self-center mx-0" t-if="record.late.raw_value">Late</span>
                                                <span class="badge rounded-pill text-bg-info align-self-center mx-0" t-if="record.state.raw_value == 'quoted'">Quoted</span>
                                                
                                                <span class="badge rounded-pill text-bg-warning align-self-center mx-0" t-if="record.state.raw_value == 'to_confirm'">To Confirm</span>
                                                <span class="badge rounded-pill text-bg-warning align-self-center mx-0" t-if="record.state.raw_value == 'to_bill'">To Bill</span>
                                            </div>
                                        </div>                          
                                    </div>
                                    <div class="o_kanban_record_bottom mt-2" style="align-items: flex-end;">
                                        <div class="d-none d-sm-block" style="width:100px"/>
                                        <div class="oe_kanban_bottom_left" style="flex-wrap: wrap;">
                                            <t t-if="record.assigned_user_id.value">
                                                <div class="d-flex align-items-center gap-1">
                                                    <field name="assigned_user_id" widget="many2one_avatar_user" domain="[('share', '=', False)]"/>
                                                    <span t-esc="record.assigned_user_id.value"/>
                                                </div>
                                            </t>
                                        </div>
                                        <div class="oe_kanban_bottom_right">
                                            <t t-if="record.type.raw_value == 'external'">
                                                <t>
                                                    <div class="d-flex flex-column text-end">
                                                        <!--
                                                        <div t-if="record.sol_currency_id.raw_value != record.po_currency_id.raw_value and record.sol_currency_id.raw_value != record.product_currency_id.raw_value">
                                                            <strong t-esc="record.applicable_so_total.value" widget="monetary"/>
                                                        </div>
                                                        <div t-if="record.po_currency_id.raw_value != record.product_currency_id.raw_value">
                                                            <strong t-esc="record.applicable_po_total.value" widget="monetary" />  
                                                        </div>
                                                        -->
                                                        <div>
                                                            <strong t-esc="record.applicable_co_total.value" widget="monetary" />
                                                        </div>
                                                    </div>                                                                                                                                    
                                                </t>
                                            </t>
                                            <t t-if="record.type.raw_value == 'internal'">
                                                <t>
                                                    <div class="d-flex flex-column text-end">
                                                        <!--
                                                        <div t-if="record.sol_currency_id.raw_value != record.product_currency_id.raw_value">
                                                            <strong t-esc="record.so_total.value" widget="monetary"/>
                                                        </div>    
                                                        -->                                            
                                                        <div>
                                                            <strong t-esc="record.applicable_co_total.value" widget="monetary" />
                                                        </div>                                                        
                                                    </div>                                                                                                                                    
                                                </t>
                                            </t>
                                            <div>
                                                <button invisible="not can_generate_po" type="object" class="btn btn-primary ges-kanban-small-btn" name="generate_po" aria-label="Generate PO" title="Generate PO"><i class="fa fa-fw fa-magic"/></button>
                                                <button invisible="not can_submitted" type="object" class="btn btn-primary ges-kanban-small-btn" name="action_wizard_submit_quote" aria-label="Submit" title="Submit"><i class="fa fa-fw fa-paper-plane"/></button>
                                                <button invisible="not can_validated" type="object" class="btn btn-success ges-kanban-small-btn" name="action_wizard_validate_quote" aria-label="Validate" title="Validate"><i class="fa fa-fw fa-check"/></button>
                                                <button invisible="not can_validated" type="object" class="btn btn-danger ges-kanban-small-btn" name="action_wizard_return_quote" aria-label="Return" title="Return"><i class="fa fa-fw fa-times"/></button>
                                                <button invisible="not can_validate_failed" type="object" class="btn btn-success ges-kanban-small-btn" name="action_wizard_validate_failed" aria-label="Validate" title="Validate"><i class="fa fa-fw fa-times"/></button>
                                                <button invisible="not can_validate_failed" type="object" class="btn btn-danger ges-kanban-small-btn" name="action_wizard_return_failed" aria-label="Return" title="Return"><i class="fa fa-fw fa-times"/></button>
                                                <button invisible="not can_selected" type="object" class="btn btn-success ges-kanban-small-btn" name="mark_selected" aria-label="Select" title="Select"><i class="fa fa-fw fa-plus"/></button>
                                                <button invisible="not can_remove_selected" type="object" class="btn btn-danger ges-kanban-small-btn" name="remove_mark_selected" aria-label="Unselect" title="Unselect"><i class="fa fa-fw fa-minus"/></button>
                                                
                                                <!--<button invisible="not can_confirmed" type="object" class="btn btn-success ges-kanban-small-btn" name="mark_confirmed" aria-label="Confirm" title="Confirm"><i class="fa fa-fw fa-check"/></button>
                                                <button invisible="not can_remove_confirmed" type="object" class="btn btn-danger ges-kanban-small-btn" name="remove_mark_confirmed" aria-label="Unconfirm" title="Unconfirm"><i class="fa fa-fw fa-times"/></button>
                                                <button invisible="not can_billed" type="object" class="btn btn-success ges-kanban-small-btn" name="mark_billed" aria-label="Billed" title="Billed"><i class="fa fa-fw fa-file-text-o"/></button>
                                                <button invisible="not can_remove_billed" type="object" class="btn btn-danger ges-kanban-small-btn" name="remove_mark_billed" aria-label="Un-Billed" title="Un-Billed"><i class="fa fa-fw fa-times"/></button>!-->


                                                <button invisible="not can_confirmed" type="object" class="btn btn-success ges-kanban-small-btn" name="action_wizard_confirm_quote" aria-label="Confirm2" title="Confirm"><i class="fa fa-fw fa-check"/></button>
                                                <button invisible="not can_remove_confirmed" type="object" class="btn btn-danger ges-kanban-small-btn" name="action_wizard_reject_quote" aria-label="Unconfirm2" title="Unconfirm"><i class="fa fa-fw fa-times"/></button>
                                                <button invisible="not can_billed" type="object" class="btn btn-success ges-kanban-small-btn" name="action_wizard_bill_quote" aria-label="Billed2" title="Billed"><i class="fa fa-fw fa-file-text-o"/></button>
                                                <button invisible="not can_remove_billed" type="object" class="btn btn-danger ges-kanban-small-btn" name="action_wizard_reject_bill" aria-label="Un-Billed2" title="Un-Billed"><i class="fa fa-fw fa-times"/></button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </t>
                    </templates>
                </kanban>
            </field>
        </record>

        

    </data>
</odoo>